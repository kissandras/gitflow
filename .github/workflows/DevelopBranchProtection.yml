name: Branch Protection

on:
  pull_request:
    branches: [ develop ]

jobs:
  check-source-branch:
    runs-on: ubuntu-latest
    steps:
      - name: Check source branch
        run: |
          source_branch="${{ github.head_ref }}"
          echo "Source branch: $source_branch"
          
          if [[ "$source_branch" =~ ^(feature|release/.*)$ ]]; then
            echo "✅ Merge from $source_branch is allowed"
          else
            echo "❌ Merges to develop are only allowed from 'feature' or 'release/*' branches"
            echo "Current source branch: $source_branch"
            exit 1
          fi
